[{"content":"","date":"30 tháng 4 2025","externalUrl":null,"permalink":"/work/","section":"Chuyện nghề","summary":"","title":"Chuyện nghề","type":"work"},{"content":"","date":"30 tháng 4 2025","externalUrl":null,"permalink":"/tags/chuy%E1%BB%87n-ngh%E1%BB%81/","section":"Tags","summary":"","title":"Chuyện Nghề","type":"tags"},{"content":"Hôm nay nghỉ lễ, tranh thủ làm tiếp. Đi làm một cái là lại bận ngay 😮‍💨. Chưa có gì tiến triển nhiều vì mình gặp phải một vấn đề: Shadow DOM không hỗ trợ phông chữ nên mấy nút bấm chứa biểu tượng của mình biến mất tiêu. Cách chữa là định nghĩa phông bên ngoài phần tử ẩn.\nĐể tải phông thì có vài cách, phổ biến nhất là dùng luật @font-face trong tập tin CSS hoặc thẻ link trong HTML. Mình thường chọn cách thứ nhất. Dưới đây là tóm tắt cách làm:\n/* fonts.css */ @font-face { font-family: \u0026#34;Nunito\u0026#34;; font-style: normal; font-weight: 400; src: url(res/fonts/Nunito-400.woff2) format(\u0026#34;woff2\u0026#34;); } @font-face { font-family: \u0026#34;Nunito\u0026#34;; font-style: normal; font-weight: 700; src: url(res/fonts/Nunito-700.woff2) format(\u0026#34;woff2\u0026#34;); } /* my-element.css */ /* Các luật áp dụng cho phần tử `my-element` */ \u0026lt;head\u0026gt; \u0026lt;!-- phông cho phần tử ẩn --\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;path/to/fonts.css\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- phần tử tự định nghĩa --\u0026gt; \u0026lt;my-element\u0026gt; \u0026lt;!-- các thuộc tính CSS khác có thể khai báo bình thường bên trong --\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;path/to/my-element.css\u0026#34;\u0026gt; \u0026lt;/my-element\u0026gt; \u0026lt;/body\u0026gt; Trong mã nguồn thì mình xử lí riêng đối với Webpack, cụ thể các bạn có thể xem tại cam kết 96a3f51. Cách làm thì đơn giản thôi, còn nguyên nhân tại sao thì mình chưa tìm được.\nThế thôi đã, nay 50 năm giải phóng đất nước cơ mà, chơi nốt mai làm tiếp 😁.\n","date":"30 tháng 4 2025","externalUrl":null,"permalink":"/work/unearthed-notes-migrate-yate-to-web-component-2/","section":"Chuyện nghề","summary":"","title":"Đào mộ bút kí: Chuyển đổi yate sang nền tảng Phần tử web 2","type":"work"},{"content":"","date":"30 tháng 4 2025","externalUrl":null,"permalink":"/","section":"Lơ lửng","summary":"","title":"Lơ lửng","type":"page"},{"content":"","date":"30 tháng 4 2025","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","date":"30 tháng 4 2025","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"30 tháng 4 2025","externalUrl":null,"permalink":"/series/yate/","section":"Series","summary":"","title":"Yate","type":"series"},{"content":"","date":"30 tháng 4 2025","externalUrl":null,"permalink":"/tags/yate/","section":"Tags","summary":"","title":"Yate","type":"tags"},{"content":"Gần một tuần đã trôi qua và mình cũng chuyển đổi được phần lớn mã nguồn sang nền tảng mới. Hi vọng sang tuần sau có thể hoàn thành. Trong bài viết trước, các bạn đã biết mình sử dụng Preact để làm giao diện. Đáng lẽ để tiết kiệm thời gian, mình nên sửa lỗi thay vì xây dựng lại như thế này, nhưng có hai nguyên nhân khiến mình muốn đổi nền tảng.\nThứ nhất, để làm tính năng dịch trên trang web, mình cần nhúng mã của mình vào trang. Một số trang web bị xung đột CSS với tiện ích của mình nên hiển thị không được tốt. Để khắc phục, mình sử dụng kĩ thuật Shadow DOM nhằm đảm bảo tách biệt hẳn phần tử của mình với các phần tử của trang web gốc. Preact không hỗ trợ kĩ thuật này.\nThứ hai, các thư viện sinh phần tử như Preact, React, vv đều sử dụng innerHTML ở đâu đó trong mã nguồn. Dù mình không sử dụng đến nhưng khi đóng gói tiện ích sẽ bị cảnh báo phương pháp này không an toàn. Đây cũng là một trong số các lí do có thể khiến tiện ích bị từ chối phê duyệt, mình thường phải thêm một đoạn giải thích để họ thông qua cho.\nVậy nên mình chuyển sang Web components để giải quyết các vấn đề trên. Đổi lại mình không thể dùng được jsx nữa. Nhiều người không thích React vì cho rằng viết jsx phá hỏng các ngữ nghĩa của web và khiến mã nguồn lộn xộn vì trộn giữa JS và HTML. Theo mình thì điều này chỉ đúng đối với các tay mơ học lập trình. Thay vì học từ gốc thì họ nhảy thẳng vào các thư viện và bộ khung nên không hiểu bản chất, dẫn tới mã nguồn tệ. Dù sao cái gì cũng có tính hai mặt, được cái này mất cái kia là chuyện thường. So với lợi ích đạt được thì hi sinh một chút trải nghiệm lập trình cũng đáng.\nPhần tử web là công nghệ được hỗ trợ sẵn bởi trình duyệt cho phép bạn đóng gói các thành phần trong một trang web theo hướng phần tử, tương tự như cách các thư viện đang làm. Ưu điểm là mình có thể tương tác trực tiếp với DOM mà không cần tới các cơ chế quản lý trạng thái phức tạp. Nhờ thế logic xử lí của mình giảm đi nhiều mà mã nguồn cũng không thay đổi mấy. Việc của mình chỉ là bê các phần tử từ Preact sang, tiện thể cải tiến luôn những gì còn thiếu sót trong phiên bản trước.\nChẳng hạn, phần tử chọn ngôn ngữ trước đây chỉ dùng chuột để chọn được, giờ có thể chọn bằng bàn phím. Phần xử lí không quá phức tạp nhưng tại thời điểm làm ra yate, mình cũng chưa vững lắm về quản lí trạng thái trong React nên loay hoay mãi không xong. Kế đến là phần nhập chữ, nếu gõ nhanh quá thì có thể mất chữ, dẫn tới dịch thiếu. Nguyên do là mình sử dụng kĩ thuật debounce (chống nảy) để giảm bớt số lượng sự kiện phải xử lí. Sau khi bỏ đi mớ trạng thái của Preact, mình chỉ cần tập trung vào sự kiện chính là lấy các từ mới đem đi dịch, nhờ thế hiệu suất tăng lên rõ rệt 😁.\nMột lưu ý nhỏ cho bạn nào mới làm quen với phần tử web: nếu cần xử lí sự kiện riêng (CustomEvent) của phần tử, đừng đặt tên sự kiện trùng với các sự kiện có sẵn của trình duyệt và đảm bảo nó chỉ xảy ra trong phần tử đó (đặt thuộc tính bubbles = false). Nếu không bạn sẽ gặp phải tình huống không biết phần tử nào phát đi sự kiện hay sự kiện bị gọi nhiều lần như mình đã dính phải d3c62ee.\nTạm thời tuần này kết thúc với việc hoàn thành chức năng dịch bằng cửa sổ thu nhỏ, tuần tới mình sẽ làm nốt dịch trên trang. Hẹn gặp lại!\n","date":"27 tháng 4 2025","externalUrl":null,"permalink":"/work/unearthed-notes-migrate-yate-to-web-components/","section":"Chuyện nghề","summary":"","title":"Đào mộ bút kí: Chuyển đổi yate sang nền tảng Phần tử web","type":"work"},{"content":"Như đã nói ở bài viết đầu tiên, mình sẽ bắt đầu lục lại những dự án cũ để phát triển tiếp, và dự án được lên thớt trước là yate - tiện ích dịch trên trình duyệt. Mình dùng nó thường xuyên mà 3 năm rồi không cập nhật gì cả, phần vì ít người dùng, phần nữa cũng do bên Edge phê duyệt lằng nhằng quá, hay bị từ chối nên mình ngại làm chứ không phải tại mình lười đâu. Sẵn tuần này đang thất nghiệp nên quyết lôi ra sửa.\nNói sơ qua lí do thì tiện ích dịch không thiếu, trước khi làm ra yate mình đã dùng một cái khá ưng cả về giao diện lẫn chức năng, lại có mặt trên đủ các trình duyệt. Nhu cầu của mình không nhiều, trộm vía tiếng Anh cũng đủ dùng nên chỉ cần dịch nhanh một vài từ thôi. Mà ghét cái là thỉnh thoảng nó hiện quảng cáo mua gói pro. Đối với mình thì tính năng pro cũng không hấp dẫn lắm: thêm chế độ tối và đồng bộ lịch sử dịch. Mình thích màu đen nên ứng dụng nào hỗ trợ nền tối mình đều bật hết, nhưng phải trả tiền để được bôi đen thì hơi bực nên mình quyết định tự làm luôn một cái. Tiện ích dịch thì phần quan trọng nhất là phải có API dịch rồi, vấn đề là dùng của bên nào. Tiêu chí của mình là làm miễn phí nên sau khi tham khảo một vài nguồn, mình chọn cách hơi tội lỗi là \u0026ldquo;mượn\u0026rdquo; API của Google. Có API rồi, giờ làm giao diện nữa thôi. Khoảng thời gian ấy mình đang viết React nên không ngần ngại chọn luôn nó. Có điều chỉ là tiện ích cùi cùi mà dùng React thì nặng quá, mình đổi sang một thằng anh em của nó là Preact, nguyên lí hoạt động tương tự nhưng nhẹ hơn rất nhiều. Nếu bạn nào thích React thì mình rất khuyến nghị dùng thử nhé. Sau khoảng một tháng mò mẫm thì tiện ích của mình được lên kệ. Tính năng cũng không thua kém hàng nhà người ta mấy: dịch, phát âm, tìm từ đồng nghĩa, vv. Ban đầu mình cũng chăm sửa lỗi nhưng rồi lượng người dùng ít, mình lại bận đi làm nên bỏ ngỏ. Được cái là dù sau 3 năm nhưng khi mở mã nguồn ra mình không phải thốt lên \u0026ldquo;thằng nào viết ra cái đống 💩 này?\u0026rdquo;.\nCập nhật là một phần tất yếu của phát triển phần mềm. Một phần mềm quá lâu không có gì mới sẽ dễ bị lãng quên hoặc thay thế. Hiện giờ không thấy ai ngoài mình dùng yate nữa. Vậy sao mình còn chọn quay lại bảo trì nó? Vì dạo này mình hơi rảnh, lỗi thì vẫn còn, và mỗi lần gặp lỗi mình cũng thấy khó chịu. Mình không muốn mất công tìm kiếm tiện ích khác. Tóm lại là đã muốn thì cần gì lí do, cứ làm thôi!\nViết tới đây thì buồn ngủ quá, máy cũng sắp hết pin. Mình bắt đầu viết từ 2 giờ chiều và giờ là gần 11 giờ đêm, có một đoạn ngắn thôi mà vừa viết vừa sửa cũng tốn thời gian phết. Dốt văn cũng khổ 😂. Mai mình sẽ duyệt lại lần nữa rồi mới đăng được. Quá trình cập nhật mã nguồn để kì tới vậy, hẹn gặp lại các bạn.\n","date":"22 tháng 4 2025","externalUrl":null,"permalink":"/work/unearthed-notes-building-my-own-browser-extension/","section":"Chuyện nghề","summary":"","title":"Đào mộ bút kí: Tự xây dựng tiện ích cho trình duyệt","type":"work"},{"content":"Bài mở đầu cho blog này. Hiển nhiên.\nĐây không phải lần đầu mình làm blog nhưng vì lười và dốt văn nên viết được một, hai bài là mình bỏ. Gần đây mình muốn xây dựng một vài thứ trong thời gian rảnh nên viết để có động lực làm. Quên chưa giới thiệu, mình làm \u0026ldquo;vua của mọi nghề\u0026rdquo;, lập trình, nên tiêu đề của bài viết này lấy cảm hứng từ bài học số một cho mọi lập trình viên. Tuy hơi nhàm chán nhưng\u0026hellip; kệ đi, mình dốt văn mà, vả lại chắc gì đã có ai đọc 😂, chủ yếu là có cái để khởi đầu bớt trống thôi.\nThôi, mở đầu tạm như thế, hi vọng những bài sau (nếu blog này không chết yểu như mấy cái trước 😅) sẽ khá hơn, xin chào và hẹn gặp lại.\n","date":"15 tháng 4 2025","externalUrl":null,"permalink":"/random-stuff/hello-world/","section":"Chuyện linh tinh","summary":"","title":"Chào thế giới","type":"random-stuff"},{"content":"","date":"15 tháng 4 2025","externalUrl":null,"permalink":"/random-stuff/","section":"Chuyện linh tinh","summary":"","title":"Chuyện linh tinh","type":"random-stuff"},{"content":"","date":"15 tháng 4 2025","externalUrl":null,"permalink":"/tags/linh-tinh/","section":"Tags","summary":"","title":"Linh Tinh","type":"tags"},{"content":"","date":"15 tháng 4 2025","externalUrl":null,"permalink":"/en/tags/misc/","section":"Tags","summary":"","title":"Misc","type":"tags"}]